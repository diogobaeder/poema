---

- name: Creating temp dir for cache
  tags: cache
  file:
    path: "{{ caching.dir }}"
    state: directory
    mode: 0700

- name: Adding cache to cron
  tags: cache
  cron:
    name: memcached
    special_time: reboot
    job: "{{ caching.command }}"

- name: Starting cache
  tags: cache
  shell: "{{ caching.command }} && echo started"
  args:
    creates: "{{ caching.pid_file }}"
